<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add contact</title>
    <link rel="stylesheet" href="/index.css">
    <link rel="import" href="/navbar.html">


</head>
<body>


<div class="container" id="container">

    <div class="gap-bottom">


        <!--<form class="reg-form" id="add-form">-->
        <div class="reg-form" id="add-form">
            <div class="reg-element">
                <label for="name">Name</label>
                <input type="text" id="name" name="name" placeholder="Name" class="reg-input">
            </div>
            <div class="reg-element">
                <label for="surname">Surname</label>
                <input type="text" id="surname" name="surname"  placeholder="Surname" class="reg-input">
            </div>
            <div class="reg-element">
                <label for="patronymic">Patronymic</label>
                <input type="text" id="patronymic" name="patronymic"  placeholder="Patronymic" class="reg-input">
            </div>
            <div class="reg-element">
                <label for="date">Date</label>
                <input type="date" id="date" name="date" placeholder="Date" value="2000-01-01" class="reg-input">
            </div>
            <div class="reg-element">
                <label for="gender">Gender</label>
                <select name="gender" id="gender">
                    <option th:each="gender : ${T(by.itechart.contacts.model.entity.Gender).values()}"
                            th:value="${gender.name()}" th:text="${gender.name()}"></option>
                </select>
            </div>
            <div class="reg-element">
                <label for="citizenship">Citizenship</label>
                <input type="text" id="citizenship"  name="citizenship" placeholder="Citizenship" class="reg-input">
            </div>
            <div class="reg-element">
                <label for="familyStatus">Family Status</label>
                <select name="familyStatus" id="familyStatus">
                    <option th:each="status : ${T(by.itechart.contacts.model.entity.FamilyStatus).values()}"
                            th:value="${status.name()}" th:text="${status.name()}"></option>
                </select>
            </div>
            <div class="reg-element">
                <label for="site">Site</label>
                <input type="text" id="site" name="site" placeholder="Site" class="reg-input">
            </div>
            <div class="reg-element">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" placeholder="Email" class="reg-input">
            </div>
            <div class="reg-element">
                <label for="job">Job</label>
                <input type="text" id="job" name="job" placeholder="Job" class="reg-input">
            </div>

            <div>
                <div class="reg-element">
                    <label for="number">Number</label>
                    <input type="tel" width="40px" pattern="+[0-9]{3}" id="countryCode" name="countryCode" placeholder="Country code" class="reg-input">
                </div>
                <div class="reg-element">
                    <input type="tel" pattern="[0-9]{9}" id="number" name="number" placeholder="Number" class="reg-input">
                </div>
                <div class="reg-element">
                    <label for="type">Type</label>
                    <select name="type" id="type">
                        <option value="mobile">Mobile</option>
                        <option value="home">Home</option>
                        <option value="work">Work</option>
                    </select>
                </div>
                <div class="reg-element">
                    <label for="comment">Comment</label>
                    <input type="text" id="comment" name="comment" placeholder="Comment" class="reg-input">
                </div>
            </div>

            <div class="reg-element">
                <input type="submit" value="button" onclick="sendData()" class="reg-button">
            </div>
        </div>

        <!--</form>-->
        <span id="message-span"></span>

    </div>

</div>
<script>
    onload = function show() {
        var link = document.querySelector('link[rel=import]');
        var content = link.import.querySelector('#nav');
        document.body.insertBefore(content.cloneNode(true), document.getElementById('container'))
    };

    function sendData() {
        var dataJson = new FormData();
        dataJson.append("name", document.getElementById('name').value);
        dataJson.append("surname", document.getElementById('surname').value);
        dataJson.append("patronymic", document.getElementById('patronymic').value);
        dataJson.append("date", document.getElementById('date').value);
        dataJson.append("gender", document.getElementById('gender').value);
        dataJson.append("citizenship", document.getElementById('citizenship').value);
        dataJson.append("familyStatus", document.getElementById('familyStatus').value);
        dataJson.append("site", document.getElementById('site').value);
        dataJson.append("email", document.getElementById('email').value);
        dataJson.append("job", document.getElementById('job').value);

        fetch('/rest/addContact', {
            method: 'POST',
            body: dataJson
        }).then(function (response) {
            response.json().then(function (data) {
                console.log(dataJson);
                console.log(data.contact);
                if (data.contact.name !== undefined) {
                    document.getElementById('add-form').style.visibility = 'none';
                    document.getElementById('message-span').innerText = "Your contact has been added";
                } else {
                    alert("ERROR")
                }
            })
        })


    };
</script>

</body>
</html>